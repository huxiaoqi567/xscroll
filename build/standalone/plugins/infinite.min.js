!function(){var e,t,n,i;e=function(e){function t(){}function n(e,n){var i;return Object.create?i=Object.create(e):(t.prototype=e,i=new t),i.constructor=n,i}for(var i=/\\?\{([^{}]+)\}/g,r="",s=/^[\s\xa0]+|[\s\xa0]+$/g,o=String.prototype.trim,l=0,a=function(e){var t=++l+"";return e?e+t:t},c=({isObject:function(e){return e===Object(e)},isArray:Array.isArray||function(e){return"[object Array]"==toString.call(e)},isEmpty:function(e){if(null==e)return!0;if(this.isArray(e)||this.isString(e))return 0===e.length;for(var t in e)if(this.has(e,t))return!1;return!0},mix:function(e,t){for(var n in t)e[n]=t[n];return e},extend:function(e,t,i,r){if(!t||!e)return e;var s,o=t.prototype;return s=n(o,e),e.prototype=this.mix(s,e.prototype),e.superclass=n(o,t),i&&this.mix(s,i),r&&this.mix(e,r),e},startsWith:function(e,t){return 0===e.lastIndexOf(t,0)},endsWith:function(e,t){var n=e.length-t.length;return n>=0&&e.indexOf(t,n)===n},trim:o?function(e){return null==e?r:o.call(e)}:function(e){return null==e?r:(e+"").replace(s,r)},substitute:function(e,t,n){return"string"==typeof e&&t?e.replace(n||i,function(e,n){return"\\"===e.charAt(0)?e.slice(1):void 0===t[n]?r:t[n]}):e},vendor:function(){for(var e,t=document.createElement("div").style,n=["t","webkitT","MozT","msT","OT"],i=0,r=n.length;r>i;i++)if(e=n[i]+"ransform",e in t)return n[i].substr(0,n[i].length-1);return!1}(),prefixStyle:function(e){return this.vendor===!1?!1:""===this.vendor?e:this.vendor+e.charAt(0).toUpperCase()+e.substr(1)},hasClass:function(e,t){return e&&e.className&&t&&-1!=e.className.indexOf(t)},addClass:function(e,t){e&&t&&!this.hasClass(e,t)&&(e.className+=" "+t)},removeClass:function(e,t){e&&e.className&&t&&(e.className=e.className.replace(t,""))},getOffsetTop:function(e){var t=e.offsetTop;return null!=e.offsetParent&&(t+=this.getOffsetTop(e.offsetParent)),t},getOffsetLeft:function(e){var t=e.offsetLeft;return null!=e.offsetParent&&(t+=this.getOffsetLeft(e.offsetParent)),t},findParentEl:function(e,t,n){var i=null;if(n=n||document.body,e&&t){if(e.className.match(t.replace(/\.|#/g,"")))return e;for(;!i&&(i=e.parentNode,e!=n);){if(i)return i;e=e.parentNode}return null}},guid:a,isAndroid:function(){return/Android /.test(window.navigator.appVersion)},isBadAndroid:function(){return/Android /.test(window.navigator.appVersion)&&!/Chrome\/\d/.test(window.navigator.appVersion)},px2Num:function(e){return Number(e.replace(/px/,""))}}),u=["Arguments","Function","String","Number","Date","RegExp"],f=0;f<u.length;f++)c["is"+u[f]]=function(e){return toString.call(e)=="[object "+u[f]+"]"};return"object"==typeof module&&module.exports?e=c:c}({}),i=function(t){var n=e,i=function(e){var t,n=!1;return function(){return n?t:(n=!0,t=e.apply(this,arguments),e=null,t)}},r={on:function(e,t,n){if(!o(this,"on",e,[t,n])||!t)return this;this._events||(this._events={});var i=this._events[e]||(this._events[e]=[]);return i.push({callback:t,context:n,ctx:n||this}),this},once:function(e,t,n){if(!o(this,"once",e,[t,n])||!t)return this;var r=this,s=i(function(){r.off(e,s),t.apply(this,arguments)});return s._callback=t,this.on(e,s,n)},off:function(e,t,n){if(!this._events||!o(this,"off",e,[t,n]))return this;if(!e&&!t&&!n)return this._events=void 0,this;for(var i=e?[e]:Object.keys(this._events),r=0,s=i.length;s>r;r++){e=i[r];var l=this._events[e];if(l)if(t||n){for(var a=[],c=0,u=l.length;u>c;c++){var f=l[c];(t&&t!==f.callback&&t!==f.callback._callback||n&&n!==f.context)&&a.push(f)}a.length?this._events[e]=a:delete this._events[e]}else delete this._events[e]}return this},trigger:function(e){if(!this._events)return this;var t=Array.prototype.slice.call(arguments,1);if(!o(this,"trigger",e,t))return this;var n=this._events[e],i=this._events.all;return n&&l(n,t),i&&l(i,arguments),this},listenTo:function(e,t,i){var r=this._listeningTo||(this._listeningTo={}),s=e._listenId||(e._listenId=n.guid("l"));return r[s]=e,i||"object"!=typeof t||(i=this),e.on(t,i,this),this},listenToOnce:function(e,t,n){if("object"==typeof t){for(var r in t)this.listenToOnce(e,r,t[r]);return this}var s=i(function(){this.stopListening(e,t,s),n.apply(this,arguments)});return s._callback=n,this.listenTo(e,t,s)},stopListening:function(e,t,i){var r=this._listeningTo;if(!r)return this;var s=!t&&!i;i||"object"!=typeof t||(i=this),e&&((r={})[e._listenId]=e);for(var o in r)e=r[o],e.off(t,i,this),(s||n.isEmpty(e._events))&&delete this._listeningTo[o];return this}},s=/\s+/,o=function(e,t,n,i){if(!n)return!0;if("object"==typeof n){for(var r in n)e[t].apply(e,[r,n[r]].concat(i));return!1}if(s.test(n)){for(var o=n.split(s),l=0,a=o.length;a>l;l++)e[t].apply(e,[o[l]].concat(i));return!1}return!0},l=function(e,t){var n,i=-1,r=e.length,s=t[0],o=t[1],l=t[2];switch(t.length){case 0:for(;++i<r;)(n=e[i]).callback.call(n.ctx);return;case 1:for(;++i<r;)(n=e[i]).callback.call(n.ctx,s);return;case 2:for(;++i<r;)(n=e[i]).callback.call(n.ctx,s,o);return;case 3:for(;++i<r;)(n=e[i]).callback.call(n.ctx,s,o,l);return;default:for(;++i<r;)(n=e[i]).callback.apply(n.ctx,t);return}};return r.bind=r.on,r.unbind=r.off,"object"==typeof module&&module.exports?t=r:r}({}),t=function(t){var n=e,r=i,s=function(){};return n.mix(s.prototype,r),n.mix(s.prototype,{plug:function(e){var t=this;if(e&&e.pluginId){t.__plugins||(t.__plugins=[]);var n=t.getPlugin(e.pluginId);return n&&t.unplug(e.pluginId),e.pluginInitializer(t),t.__plugins.push(e),t}},unplug:function(e){var t=this;if(e){var n="string"==typeof e?t.getPlugin(e):e;n.pluginDestructor(t);for(var i in t.__plugins)if(t.__plugins[i]==n)return t.__plugins.splice(i,1)}},getPlugin:function(e){var t=this,n=[];for(var i in t.__plugins)t.__plugins[i]&&t.__plugins[i].pluginId==e&&n.push(t.__plugins[i]);return n.length>1?n:n[0]||null}}),"object"==typeof module&&module.exports?t=s:s}({}),n=function(n){var i=e,r=t,s=i.prefixStyle("transform"),o=i.prefixStyle("transition"),l=function(e){l.superclass.constructor.call(this,e),this.userConfig=i.mix({zoomType:"y",transition:"all 0.5s ease"},e)};if(i.extend(l,r,{pluginId:"infinite",visibleElements:{},sections:{},pluginInitializer:function(e){var t=this;return t.xscroll=e,t.isY=!("y"!=t.userConfig.zoomType),t._nameTop=t.isY?"_top":"_left",t._nameHeight=t.isY?"_height":"_width",t.nameTop=t.isY?"top":"left",t.nameHeight=t.isY?"height":"width",t.nameWidth=t.isY?"width":"height",t.nameY=t.isY?"y":"x",t.nameTranslate=t.isY?"translateY":"translateX",t.nameContainerHeight=t.isY?"containerHeight":"containerWidth",t.nameScrollTop=t.isY?"scrollTop":"scrollLeft",t._initInfinite(),e.on("afterrender",function(){t.render(),t._bindEvt()}),t},pluginDestructor:function(){var e=this;e.xscroll.off("scroll",e._updateByScroll,e);for(var t=0;t<e.infiniteLength;t++)e.infiniteElements[t].style.position="inherit",e.infiniteElements[t].style.visibility="inherit",e.infiniteElements[t].style.display="inherit",e.infiniteElements[t].style[e.nameTop]="auto",e.infiniteElements[t].style[s]="none";return e.xscroll.off("tap panstart pan panend",e._cellEventsHandler,e),e._destroySticky(),e},_initInfinite:function(){var e=this,t=e.xscroll;return e.sections={},e.infiniteElements=t.renderTo.querySelectorAll(e.userConfig.infiniteElements),e.infiniteLength=e.infiniteElements.length,e.infiniteElementsCache=function(){for(var t=[],n=0;n<e.infiniteLength;n++)t.push({}),e.infiniteElements[n].style.position="absolute",e.infiniteElements[n].style[e.nameTop]=0,e.infiniteElements[n].style.visibility="hidden",e.infiniteElements[n].style.display="block",i.addClass(e.infiniteElements[n],"_xs_infinite_elements_");return t}(),e.elementsPos={},t.on("scroll",e._updateByScroll,e),e},_initSticky:function(){var e=this;if(e.stickyDomInfo=[],e.hasSticky){if(!e._isStickyRendered){var t=document.createElement("div");t.style.position="fixed",t.style.left=0,t.style.top=0,t.style.display="none",i.addClass(t,"_xs_infinite_elements_"),e.xscroll.renderTo.appendChild(t),e.stickyElement=t,e._isStickyRendered=!0}for(var n in e.__serializedData){var t=e.__serializedData[n];t&&t.style&&"sticky"==t.style.position&&e.stickyDomInfo.push(t)}return e}},_destroySticky:function(){var e=this;return e.hasSticky=!1,e.stickyElement&&e.stickyElement.remove(),e._isStickyRendered=!1,e},_renderUnRecycledEl:function(){var e=this,t=e.userConfig.gpuAcceleration?" translateZ(0) ":"";for(var n in e.__serializedData){var r=e.__serializedData[n];if(e.__serializedData[n].recycled===!1){var o=r.id&&document.getElementById(r.id.replace("#",""))||document.createElement("div"),l=i.guid("xs-row-");o.id=r.id||l,r.id=o.id,e.xscroll.content.appendChild(o);for(var a in r.style)a!=e.nameHeight&&"display"!=a&&"position"!=a&&(o.style[a]=r.style[a]);o.style[e.nameTop]=0,o.style.position="absolute",o.style.display="block",o.style[e.nameHeight]=r[e._nameHeight]+"px",o.style[s]=e.nameTranslate+"("+r[e._nameTop]+"px) "+t,i.addClass(o,r.className),e.userConfig.renderHook.call(e,o,r)}}},render:function(){var e=this,t=e.xscroll,n=e.isY?t.getScrollTop():t.getScrollLeft();e.visibleElements=e.getVisibleElements(n),e.__serializedData=e._computeDomPositions(),e._initSticky();var i=t[e.nameHeight],r=e._containerSize;return i>r&&(r=i),t[e.nameContainerHeight]=r,t.container.style[e.nameHeight]=r+"px",t.content.style[e.nameHeight]=r+"px",e.curStickyIndex=void 0,e._renderUnRecycledEl(),e._updateByScroll(),e._updateByRender(n),e.xscroll.boundryCheck(),e},_getChangedRows:function(e){var t=this,n={};for(var i in t.elementsPos)e.hasOwnProperty(i)||(n[i]="delete");for(var i in e)e[i].recycled&&!t.elementsPos.hasOwnProperty(i)&&(n[i]="add");return t.elementsPos=e,n},_updateByScroll:function(e){var t=this,n=t.xscroll,i=e&&e[t.nameScrollTop],r=void 0===i?t.isY?n.getScrollTop():n.getScrollLeft():i,s=t.getVisibleElements(r),o=t._getChangedRows(s);for(var l in o)if("delete"==o[l]&&t._pushEl(l),"add"==o[l]){var a=t._popEl(s[l][t.guid]),c=a.index,u=a.el;u&&(t.infiniteElementsCache[c].guid=s[l].guid,t.__serializedData[s[l].guid].__infiniteIndex=c,t._renderData(u,s[l]),t._renderStyle(u,s[l]))}return t._stickyHandler(r),t},_updateByRender:function(e){var t,n,i=this,r=i.xscroll,e=void 0===e?i.isY?r.getScrollTop():r.getScrollLeft():e,s=i.visibleElements,o=i.getVisibleElements(e);for(var l in o){n=o[l];for(var a in s)if(t=s[a],t.guid===n.guid)(n.style!=t.style||n[i._nameTop]!=t[i._nameTop]||n[i._nameHeight]!=t[i._nameHeight])&&i._renderStyle(i.infiniteElements[n.__infiniteIndex],n,!0),JSON.stringify(n.data)!=JSON.stringify(t.data)&&i._renderData(i.infiniteElements[n.__infiniteIndex],n);else if(void 0===i.__serializedData[n.guid].__infiniteIndex){var c=i._popEl();i.__serializedData[n.guid].__infiniteIndex=c.index,i._renderData(c.el,n),i._renderStyle(c.el,n)}}i.visibleElements=o},_stickyHandler:function(e){var t=this;e=void 0===e?t.isY?t.xscroll.getScrollTop():t.xscroll.getScrollLeft():e;for(var n=Math.abs(e),r=[],o=[],l=0;l<t.stickyDomInfo.length;l++)o.push(t.stickyDomInfo[l][t._nameTop]),n>=t.stickyDomInfo[l][t._nameTop]&&r.push(l);if(!r.length)return t.stickyElement&&(t.stickyElement.style.display="none"),void(t.curStickyIndex=void 0);var a=Math.max.apply(null,r);if(t.curStickyIndex!==a){t.curStickyIndex=a,t.userConfig.renderHook.call(t,t.stickyElement,t.stickyDomInfo[t.curStickyIndex]),t.stickyElement.style.display="block",t.stickyElement.style[t.nameWidth]="100%",t.stickyElement.style[t.nameHeight]=t.stickyDomInfo[t.curStickyIndex].style[t.nameHeight]+"px",t.stickyElement.setAttribute("xs-guid",t.stickyDomInfo[t.curStickyIndex].guid),i.addClass(t.stickyElement,t.stickyDomInfo[t.curStickyIndex].className);for(var c in t.stickyDomInfo[t.curStickyIndex].style)c!=t.nameHeight&&"display"!=c&&"position"!=c&&(t.stickyElement.style[c]=t.stickyDomInfo[t.curStickyIndex].style[c])}var u=0;if(t.stickyDomInfo[t.curStickyIndex+1]){var f=t.stickyDomInfo[t.curStickyIndex],d=t.stickyDomInfo[t.curStickyIndex+1];u=e+f[t._nameHeight]>d[t._nameTop]&&e+f[t._nameHeight]<d[t._nameTop]+f[t._nameHeight]?f[t._nameHeight]+n-d[t._nameTop]:0}return t.stickyElement.style[s]=t.isY?"translateY(-"+u+"px) translateZ(0)":"translateX(-"+u+"px) translateZ(0)",e<Math.min.apply(null,o)?(t.stickyElement.style.display="none",void(t.curStickyIndex=void 0)):void 0},_computeDomPositions:function(){var e,t=this,n=0,r=0,s=t.sections;t.hasSticky=!1;var o=[],l={};for(var a in s)for(var c=0,u=s[a].length;u>c;c++)e=s[a][c],e.sectionId=a,e.index=c,o.push(e);t.userConfig.maxSpeed=3;for(var a=0,f=o.length;f>a;a++){var d=o[a];r=d.style&&d.style[t.nameHeight]>=0?d.style[t.nameHeight]:100,d.guid=d.guid||i.guid(),d[t._nameTop]=n,d[t._nameHeight]=r,d.recycled=d.recycled===!1?!1:!0,n+=r,!t.hasSticky&&d.style&&"sticky"==d.style.position&&(t.hasSticky=!0),l[d.guid]=d}return t._containerSize=n,l},getVisibleElements:function(e){var t,n=this,i=n.xscroll,e=void 0===e?n.isY?i.getScrollTop():i.getScrollLeft():e,r=n.userConfig.threshold>=0?n.userConfig.threshold:i[n.nameHeight]/3,s={},o=n.__serializedData;for(var l in o)t=o[l],t[n._nameTop]>=e-r&&t[n._nameTop]<=e+i[n.nameHeight]+r&&(s[t.guid]=t);return JSON.parse(JSON.stringify(s))},_popEl:function(){for(var e=this,t=0;t<e.infiniteLength;t++)if(!e.infiniteElementsCache[t]._visible)return e.infiniteElementsCache[t]._visible=!0,{index:t,el:e.infiniteElements[t]}},_pushEl:function(e){for(var t=this,n=0;n<t.infiniteLength;n++)t.infiniteElementsCache[n].guid==e&&(t.infiniteElementsCache[n]._visible=!1,t.infiniteElements[n].style.visibility="hidden",delete t.infiniteElementsCache[n].guid)},_renderData:function(e,t){var n=this;e&&n.userConfig.renderHook.call(n,e,t)},_renderStyle:function(e,t,n){var i=this;if(e){var r=i.xscroll.userConfig.gpuAcceleration?" translateZ(0) ":"",l={color:"inherit",background:"inherit",margin:"inherit",padding:"inherit",opacity:"inherit",textIndent:"inherit",overflow:"inherit"};for(var a in l)e.style[a]=l[a];for(var a in t.style)a!=i.nameHeight&&"display"!=a&&"position"!=a&&(e.style[a]=t.style[a]);e.setAttribute("xs-index",t.index),e.setAttribute("xs-sectionid",t.sectionId),e.setAttribute("xs-guid",t.guid),e.style.visibility="visible",e.style[i.nameHeight]=t[i._nameHeight]+"px",e.style[s]=i.nameTranslate+"("+t[i._nameTop]+"px) "+r,e.style[o]=n?i.userConfig.transition:"none"}},getCell:function(e){var t=this,n=i.findParentEl(e.target,"._xs_infinite_elements_",t.xscroll.renderTo),r=n.getAttribute("xs-guid");return void 0!==r?t.__serializedData[r]:void 0},_bindEvt:function(){var e=this;if(!e._isEvtBinded)return e._isEvtBinded=!0,e.xscroll.renderTo.addEventListener("webkitTransitionEnd",function(e){e.target.className.match(/xs-row/)&&(e.target.style.webkitTransition="")}),e.xscroll.on("tap panstart pan panend",e._cellEventsHandler,e),e},_cellEventsHandler:function(e){var t=this;e.cell=t.getCell(e),e.cell&&t[e.type].call(t,e)},tap:function(e){return this.trigger("tap",e),this},panstart:function(e){return this.trigger("panstart",e),this},pan:function(e){return this.trigger("pan",e),this},panend:function(e){return this.trigger("panend",e),this},insertBefore:function(e,t,n){var i=this;return void 0===e||void 0===t||void 0===n?i:(i.sections[e]||(i.sections[e]=[]),i.sections[e].splice(t,0,n),i)},insertAfter:function(e,t,n){var i=this;return void 0===e||void 0===t||void 0===n?i:(i.sections[e]||(i.sections[e]=[]),i.sections[e].splice(Number(t)+1,0,n),i)},append:function(e,t){var n=this;return n.sections[e]||(n.sections[e]=[]),n.sections[e]=n.sections[e].concat(t),n},remove:function(e,t,n){var i=this,n=n||1;return void 0!==e&&i.sections[e]?void 0===t?(delete i.sections[e],i):i.sections[e]&&i.sections[e][t]?(i.sections[e].splice(t,n),i):i:i},replace:function(e,t,n){var i=this;return void 0!==e&&i.sections[e]?(i.sections[e][t]=n,i):i},get:function(e,t){return void 0!==e?void 0===t?this.sections[e]:this.sections[e][t]:void 0}}),"object"==typeof module&&module.exports)n=l;else if(window.XScroll&&window.XScroll.Plugins)return XScroll.Plugins.Infinite=l;return n}({})}();